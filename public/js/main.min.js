var devicejs = device.noConflict();
is_mobile = function () {
    return (window.innerWidth < 768 || (screen.width < 1024 && (devicejs.ios() || devicejs.android() || devicejs.mobile || devicejs.windowsPhone)))
};
resizeNavBar = function () {
    $(".navbar-fixed-top .navbar-collapse").css({"max-height": (screen.height - $(".navbar-header").height())})
};
$(".navbar-collapse").on("show.bs.collapse", resizeNavBar);
$(document).on("resize orientationchange ready", resizeNavBar);
$(document).ready(function () {
    $(".product .name").hover(function () {
        $(this).children("span").css({"max-width": $(this).width()})
    })
});
arrayHasOwnIndex = function (b, a) {
    return b.hasOwnProperty(a) && /^0$|^[1-9]\d*$/.test(a) && a <= 4294967294
};
Array.prototype.array_to_int = function () {
    var b = [];
    for (var a in this) {
        if (arrayHasOwnIndex(this, a)) {
            b[a] = (typeof this[a] == "object") ? this[a].array_to_int() : parseInt(this[a])
        }
    }
    return b
};
maskPhone = function (b) {
    var a = {
        translation: {"7": {pattern: /7|8/, fallback: "8"}, "+": {pattern: /\+/, optional: true, fallback: "+"}},
        onKeyPress: function (c, f, e, d) {
            if (c.indexOf("+8") == 0) {
                $(e).val(c.replace("+", ""))
            }
        },
        placeholder: "8(___) ___-__-__"
    };
    $(b).mask("+7(000) 000-00-00", a)
};
show_backdrop = function () {
    if (!$(".menu").hasClass("menu-backdrop")) {
        $(".menu").addClass("menu-backdrop")
    }
};
hide_backdrop = function () {
    if (!is_mobile() || $(".menu .pz_menu:visible, .menu .catalog-filter:visible").size() == 0) {
        $(".menu").removeClass("menu-backdrop")
    }
};
(function (a) {
    var b = {
        start: function () {
            var c = a("<div id='jpreloader' class='preloader-overlay'><div class='loader' style='position:absolute;left:50%;top:50%;'><div class='line-spin-fade-loader'><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div></div>");
            c.css({
                "background-color": "#4c4c4c",
                width: "100%",
                height: "100%",
                left: "0",
                top: "0",
                opacity: "0.3",
                "z-index": "100",
                position: "absolute"
            });
            this.append(c)
        }, stop: function () {
            this.find(".preloader-overlay").remove()
        }
    };
    a.fn.preloader = function (c) {
        b[c].apply(this);
        return this
    }
}(jQuery));
(function (b) {
    var a = 0;
    b('[data-toggle="electroCarousel"]').each(function () {
        var c = b(this).data("resize-element"), g = b(this).data("count-element") || 6,
            d = b(this).data("vertical") || false, e = b(this).data("next") || false, f = b(this).data("prev") || false;
        if (typeof c == "undefined") {
            c = true
        }
        this.id = "carousel_" + a++;
        b("#" + this.id).electroCarousel({
            speed: 500,
            leftButton: (e) ? e : "#" + this.id + " .btnLeft",
            rightButton: (f) ? f : "#" + this.id + " .btnRight",
            resizeElement: c,
            countElement: g,
            vertical: d
        })
    })
})(jQuery);
no_hide_menu = false;
(function (a) {
    a(document).ready(function () {
        a("body").on("click", function (b) {
            if (a(".hamburger").is(b.target) || a(".hamburger").has(b.target).length === 1 || a(".navbar-toggle").is(b.target) || a(".navbar-toggle").has(b.target).length === 1) {
                no_hide_menu = true
            }
            a('[data-dismiss="collapse"]').each(function () {
                if (a(this).is(b.target)) {
                    a(this).closest(".collapse").collapse("hide")
                }
            });
            a("[data-toggle=popover]").each(function () {
                if (!a(this).is(b.target) && a(this).has(b.target).length === 0 && (a(".popover").has(b.target).length === 0 || a(b.target).data("dismiss") == "popover") && a(".select2-container").has(b.target).length === 0) {
                    a(this).popover("hide")
                }
            });
            if (a(".navbar-fixed-top .collapse").has(b.target).length === 0 && a(".city_change").has(b.target).length === 0) {
                a(".navbar-fixed-top .collapse").collapse("hide")
            }
        });
        a("[data-toggle=popover]").each(function () {
            var d = a(this).data("class-popover") || "", b = (typeof window[d] == "object") ? window[d] : {};
            a(this).popover(b);
            if (typeof window[d] == "object") {
                if (typeof window[d]["shown"] == "function") {
                    a(this).on("shown.bs.popover", window[d]["shown"])
                }
                if (typeof window[d]["show"] == "function") {
                    a(this).on("show.bs.popover", window[d]["show"])
                }
                if (typeof window[d]["hide"] == "function") {
                    a(this).on("hide.bs.popover", window[d]["hide"])
                }
                if (typeof window[d]["hidden"] == "function") {
                    a(this).on("hidden.bs.popover", window[d]["hidden"])
                }
            }
            var c = this;
            a(window).resize(function () {
                if (!is_mobile()) {
                    a(c).popover("hide")
                }
            })
        });
        a("[data-toggle=popover]").mousedown(function () {
            a(this).popover("toggle")
        });
        a(".navbar-collapse").on("shown.bs.collapse", function () {
            a(".catalog-filter").collapse("hide")
        }).on("hide.bs.collapse", hide_backdrop);
        if (a("#city_change").data("geotarget")) {
            a("#city_change").popover("show")
        }
    })
})(jQuery);

function unserialize(e) {
    var g = (typeof window !== "undefined" ? window : global);
    var b = function (l) {
        var j = l.length;
        for (var h = l.length - 1; h >= 0; h--) {
            var k = l.charCodeAt(h);
            if (k > 127 && k <= 2047) {
                j++
            } else {
                if (k > 2047 && k <= 65535) {
                    j += 2
                }
            }
            if (k >= 56320 && k <= 57343) {
                h--
            }
        }
        return j - 1
    };
    var c = function (j, k, i, h) {
        throw new g[j](k, i, h)
    };
    var f = function (l, n, m) {
        var j = 2;
        var h = [];
        var k = l.slice(n, n + 1);
        while (k !== m) {
            if ((j + n) > l.length) {
                c("Error", "Invalid")
            }
            h.push(k);
            k = l.slice(n + (j - 1), n + j);
            j += 1
        }
        return [h.length, h.join("")]
    };
    var a = function (m, n, l) {
        var j, k, h;
        h = [];
        for (j = 0; j < l; j++) {
            k = m.slice(n + (j - 1), n + j);
            h.push(k);
            l -= b(k)
        }
        return [h.length, h.join("")]
    };

    function d(C, m) {
        var A;
        var q;
        var z;
        var r;
        var w;
        var k;
        var n;
        var B;
        var j;
        var o;
        var h;
        var x;
        var D;
        var l;
        var t;
        var v;
        var p;
        var u;
        var s = 0;
        var y = function (i) {
            return i
        };
        if (!m) {
            m = 0
        }
        A = (C.slice(m, m + 1)).toLowerCase();
        q = m + 2;
        switch (A) {
            case"i":
                y = function (i) {
                    return parseInt(i, 10)
                };
                j = f(C, q, ";");
                s = j[0];
                B = j[1];
                q += s + 1;
                break;
            case"b":
                y = function (i) {
                    return parseInt(i, 10) !== 0
                };
                j = f(C, q, ";");
                s = j[0];
                B = j[1];
                q += s + 1;
                break;
            case"d":
                y = function (i) {
                    return parseFloat(i)
                };
                j = f(C, q, ";");
                s = j[0];
                B = j[1];
                q += s + 1;
                break;
            case"n":
                B = null;
                break;
            case"s":
                o = f(C, q, ":");
                s = o[0];
                h = o[1];
                q += s + 2;
                j = a(C, q + 1, parseInt(h, 10));
                s = j[0];
                B = j[1];
                q += s + 2;
                if (s !== parseInt(h, 10) && s !== B.length) {
                    c("SyntaxError", "String length mismatch")
                }
                break;
            case"a":
                B = {};
                z = f(C, q, ":");
                s = z[0];
                r = z[1];
                q += s + 2;
                k = parseInt(r, 10);
                w = true;
                for (x = 0; x < k; x++) {
                    l = d(C, q);
                    t = l[1];
                    D = l[2];
                    q += t;
                    v = d(C, q);
                    p = v[1];
                    u = v[2];
                    q += p;
                    if (D !== x) {
                        w = false
                    }
                    B[D] = u
                }
                if (w) {
                    n = new Array(k);
                    for (x = 0; x < k; x++) {
                        n[x] = B[x]
                    }
                    B = n
                }
                q += 1;
                break;
            default:
                c("SyntaxError", "Unknown / Unhandled data type(s): " + A);
                break
        }
        return [A, q - m, y(B)]
    }

    return d((e + ""), 0)[2]
}

function number_format(f, c, h, e) {
    f = (f + "").replace(/[^0-9+\-Ee.]/g, "");
    var b = !isFinite(+f) ? 0 : +f, a = !isFinite(+c) ? 0 : Math.abs(c), j = (typeof e === "undefined") ? "," : e,
        d = (typeof h === "undefined") ? "." : h, i = "", g = function (o, m) {
            var l = Math.pow(10, m);
            return "" + (Math.round(o * l) / l).toFixed(m)
        };
    i = (a ? g(b, a) : "" + Math.round(b)).split(".");
    if (i[0].length > 3) {
        i[0] = i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g, j)
    }
    if ((i[1] || "").length < a) {
        i[1] = i[1] || "";
        i[1] += new Array(a - i[1].length + 1).join("0")
    }
    return i.join(d)
};